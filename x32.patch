--- x264-snapshot-20140824-2245/configure~	2015-03-05 18:41:55.000000000 +0000
+++ x264-snapshot-20140824-2245/configure	2015-03-05 18:47:39.881867944 +0000
@@ -594,8 +594,8 @@
             if [[ "$asm" == auto && "$CFLAGS" != *-mfpmath* ]]; then
                 CFLAGS="$CFLAGS -mfpmath=sse -msse"
             fi
-            CFLAGS="-m32 $CFLAGS"
-            LDFLAGS="-m32 $LDFLAGS"
+            CFLAGS="$CFLAGS"
+            LDFLAGS="$LDFLAGS"
         elif [ $compiler = ICC ]; then
             # icc on linux has various degrees of mod16 stack support
             if [ $SYS = LINUX ]; then
@@ -627,7 +627,7 @@
         ARCH="X86_64"
         AS="yasm"
         ASFLAGS="$ASFLAGS -DARCH_X86_64=1 -I\$(SRCPATH)/common/x86/"
-        [ $compiler = GNU ] && CFLAGS="-m64 $CFLAGS" && LDFLAGS="-m64 $LDFLAGS"
+        [ $compiler = GNU ] && CFLAGS="$CFLAGS" && LDFLAGS="$LDFLAGS"
         if [ "$SYS" = MACOSX ]; then
             ASFLAGS="$ASFLAGS -f macho64 -m amd64 -DPIC -DPREFIX"
             if cc_check '' "-arch x86_64"; then
@@ -641,7 +641,14 @@
             [ $compiler = GNU ] && LDFLAGS="$LDFLAGS -Wl,--nxcompat -Wl,--dynamicbase"
             [ $compiler = GNU ] && RCFLAGS="--target=pe-x86-64 $RCFLAGS"
         else
+	  case "$host_os" in
+		*gnux32)
+			ASFLAGS="$ASFLAGS -f elfx32 -m amd64"
+		;;
+		*)
             ASFLAGS="$ASFLAGS -f elf -m amd64"
+	    ;;
+	  esac
         fi
         ;;
     powerpc|powerpc64)
